#!/bin/bash

# Directory containing the files
directory=$1

# Check if directory is provided
if [[ -z "$directory" ]]; then
    echo "Usage: $0 <directory>"
    exit 1
fi

decoded_message=""

# Iterate over files in the directory
for file in $(ls "$directory" | grep -E '^[0-9]+$' | sort -n); do
    # Fetch the Blocks value using stat
    blocks=$(stat --format="%b" "$directory/$file")
    
    # Divide Blocks by 8 to get ASCII value
    ascii_value=$((blocks / 8))
    
    # Ensure valid ASCII value
    if [[ $ascii_value -ge 0 && $ascii_value -le 127 ]]; then
        decoded_message+=$(printf "\\$(printf '%03o' $ascii_value)")
    else
        decoded_message+="?"  # Placeholder for invalid values
    fi
done

# Output the decoded message
echo "Decoded message: $decoded_message"